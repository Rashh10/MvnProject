pipeline {
    agent any
    stages {
        stage ('checkout ')
        {
            steps
            { 
                 git 'https://github.com/Rashh10/MvnProject.git'
            }
        }
        
        stage('Cleaning Stage') {
            steps {
                bat "mvn clean"
            }
        }
        stage('Testing Stage') {
            steps {
                bat "mvn test"
            }
        }
        stage('Packaging Stage') {
            steps {
                bat "mvn package"
            }
        }
        stage('Deploy')
        {
            steps
            {
                bat "mvn deploy"
            }
        }
        stage('SonarQube Stage') {
            steps {
                bat "mvn clean test sonar:sonar -D sonar.login=108879aeb256d582c404d5f8f42a0c7c8d4b675a"
            }
        }
        stage('Quality Gate') {
                waitForQualityGateabortPipeline: true
        
        }
        stage("Consolidate Results"){
        steps{
            input("Do you want to capture results?")
            junit'**/target/surefire-reports/TEST-*.xml'
            archive 'target/*.jar'
            }
        }
    
    }
    
}
